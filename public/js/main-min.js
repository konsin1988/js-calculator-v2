const switcherTheme=document.querySelectorAll(".switcher-svg"),bottom=document.querySelector(".bottom"),main=document.querySelector("main"),numbersBtn=document.querySelectorAll(".number");let resultDisplay=document.querySelector(".result-span"),allInput=document.querySelector(".num-all");const items=document.querySelectorAll(".item");function addSunTheme(){main.className="main light-theme"}function addMoonTheme(){main.className="main dark-theme"}switcherTheme[0].addEventListener("click",addSunTheme),switcherTheme[1].addEventListener("click",addMoonTheme);let result="0",numbers=[];const operators=[];let current="";function keyPressed(e){if(e.classList.contains("number"))numberPressed(e);else if(e.dataset.type){if(numbers.length==[])return;operatorPressed(e.dataset.type)}else e.dataset.action&&actionPressed(e.dataset.action)}function numberPressed(e){numbers.pop();let r=e.innerHTML;current.length>12?numbers.push(current):("."==r&&(r=""==current?"0.":Number.isInteger(+current)?".":""),current+=r,numbers.push(current),updateResult(),""===allInput.innerHTML?allInput.innerHTML=r:allInput.innerHTML+=r)}function operatorPressed(e){switch(e){case"div":addOperator('<i class="fa-solid fa-divide"></i>',e);break;case"mult":addOperator('<i class="fa fa-times" aria-hidden="true"></i>',e);break;case"sub":addOperator('<i class="fa fa-minus" aria-hidden="true"></i>',e);break;case"add":addOperator('<i class="fa fa-plus" aria-hidden="true"></i>',e)}}function getCurrentOperation(e){switch(e){case"div":return(e,r)=>e/r;case"mult":return(e,r)=>e*r;case"sub":return(e,r)=>e-r;case"add":return(e,r)=>e+r}}function actionPressed(e){switch(e){case"AC":resetToZero();break;case"percent":getPercent();break;case"remove-one":removeLastSymbol();break;case"equal":equalPressed()}}function getPercent(){0==numbers.length||isLastNode()||(current=numbers.pop(),allInput.innerHTML=allInput.innerHTML.slice(0,-current.length),current=String(+current/100),numbers.push(current),allInput.innerHTML+=current,updateResult())}function addOperator(e,r){(isLastNode()||isDot())&&removeLastSymbol(),removeZeroes(),operators.push(r),current="",numbers.push(current),updateResult(),allInput.innerHTML+=e}function removeZeroes(){let e=numbers.pop();allInput.innerHTML=allInput.innerHTML.slice(0,-e.length),allInput.innerHTML+=String(+e),numbers.push(String(+e))}function removeLastSymbol(){0!=numbers.length&&(isLastNode()?(allInput.lastChild.remove(),operators.pop(),current=numbers.pop()):(current=numbers.pop(),allInput.innerHTML=allInput.innerHTML.slice(0,-1),current=current.slice(0,-1),numbers.push(current)),updateResult())}function isLastNode(){return">"===allInput.innerHTML[allInput.innerHTML.length-1]}function isDot(){return"."===allInput.innerHTML[allInput.innerHTML.length-1]}function resetToZero(){allInput.innerHTML="",resultDisplay.innerHTML="0",current="",numbers.length=0,operators.length=0}function updateResult(){resultDisplay.innerHTML=numbers.length>1?calculateResult(numbers.slice(0).reverse(),operators.slice(0).reverse()):""==numbers[0]?"0":+numbers[0],numbers=""==numbers[0]?[]:numbers}function calculateResult(e,r){let n,t,s;for(;r.length;)if(t=e.pop(),""==(s=e.pop()))e.push(+t),r.pop();else{if((n=getCurrentOperation(r.pop()))(+t,+s)==1/0)return"Division by zero";e.push(n(+t,+s))}return+e.pop().toFixed(9)}function equalPressed(){0!=numbers.length&&1!=numbers.length&&(numbers[0]=String(calculateResult(numbers.slice(0).reverse(),operators.slice(0).reverse())),operators.length=0,current=numbers[0],allInput.innerHTML=numbers[0],numbers.length=1,updateResult())}items.forEach(e=>e.addEventListener("click",e=>{keyPressed(e.target)}));